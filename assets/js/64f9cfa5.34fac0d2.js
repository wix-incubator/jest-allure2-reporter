"use strict";(self.webpackChunk_wix_website_jest_allure2_reporter=self.webpackChunk_wix_website_jest_allure2_reporter||[]).push([[83],{4347:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>u,contentTitle:()=>c,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var n=a(5893),r=a(1151),s=a(3992),l=a(425);const o={description:"Enhance your test reports with screenshots, videos, logs, and more."},c="Attachments",i={unversionedId:"docs/api/attachments",id:"docs/api/attachments",title:"Attachments",description:"Enhance your test reports with screenshots, videos, logs, and more.",source:"@site/../docs/docs/api/03-attachments.mdx",sourceDirName:"docs/api",slug:"/docs/api/attachments",permalink:"/jest-allure2-reporter/docs/api/attachments",draft:!1,unlisted:!1,editUrl:"https://github.com/wix-incubator/jest-allure2-reporter/tree/alpha/docs/../docs/docs/api/03-attachments.mdx",tags:[],version:"current",sidebarPosition:3,frontMatter:{description:"Enhance your test reports with screenshots, videos, logs, and more."},sidebar:"docsSidebar",previous:{title:"Steps",permalink:"/jest-allure2-reporter/docs/api/steps"},next:{title:"Parameters",permalink:"/jest-allure2-reporter/docs/api/parameters"}},u={},d=[{value:"Built-in attachment types",id:"built-in-attachment-types",level:2},{value:"Custom attachments",id:"custom-attachments",level:2}];function h(e){const t=Object.assign({h1:"h1",admonition:"admonition",p:"p",code:"code",ul:"ul",li:"li",h2:"h2",pre:"pre"},(0,r.ah)(),e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"attachments",children:"Attachments"}),"\n",(0,n.jsx)(t.admonition,{type:"caution",children:(0,n.jsxs)(t.p,{children:["This website version refers to the unreleased version of ",(0,n.jsx)(t.code,{children:"jest-allure2-reporter"}),", partially available as ",(0,n.jsx)(t.code,{children:"2.0.0-alpha.*"})," release.\nPlease use GitHub docs for the latest stable version, ",(0,n.jsx)(t.code,{children:"1.x.x"}),"."]})}),"\n",(0,n.jsx)(t.p,{children:"Attachments are a powerful feature of Allure reports that can help make your tests much more informative. You can attach text logs, screenshots, configuration details, CSV files, and much more to your tests. These attachments can help you diagnose and debug failing tests."}),"\n",(0,n.jsx)(t.p,{children:"There are several ways to add attachments to a test:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["Using the ",(0,n.jsx)(t.code,{children:"allure.attachment"})," function"]}),"\n",(0,n.jsxs)(t.li,{children:["Using the ",(0,n.jsx)(t.code,{children:"allure.createAttachment"})," function"]}),"\n",(0,n.jsxs)(t.li,{children:["Using the ",(0,n.jsx)(t.code,{children:"@Attachment"})," decorator"]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"built-in-attachment-types",children:"Built-in attachment types"}),"\n",(0,n.jsx)(t.p,{children:"The simplest way to start with attachments is to use the built-in ones:"}),"\n",(0,n.jsx)(s.Z,{groupId:"approach",children:(0,n.jsx)(l.Z,{value:"function",label:"Function",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"import { allure } from 'jest-allure2-reporter';\n\ntest('Sample test', async () => {\n  await allure.attachment('My attachment', 'This is a simple text attachment', 'text/plain');\n});\n"})})})}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"allure.attachment"})," function takes three arguments: name of the attachment, content, and the content type. The content type must be a valid MIME type."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.code,{children:"TODO: add screenshot"})}),"\n",(0,n.jsx)(t.h2,{id:"custom-attachments",children:"Custom attachments"}),"\n",(0,n.jsx)(t.p,{children:"For advanced use cases, you may want to create your own custom attachments:"}),"\n",(0,n.jsxs)(s.Z,{children:[(0,n.jsxs)(l.Z,{value:"attachment",children:[(0,n.jsxs)(t.p,{children:["Using ",(0,n.jsx)(t.code,{children:"allure.attachment"})," function is the most straightforward way to add a custom attachment:"]}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"import { allure } from 'jest-allure2-reporter';\n\ntest('Sample test', async () => {\n  const myData = JSON.stringify({a: 1, b: 2});\n  await allure.attachment('My JSON attachment', myData, 'application/json');\n});\n"})}),(0,n.jsx)(t.p,{children:"The disadvantage of this approach is that it is less flexible and more verbose for complex data."})]}),(0,n.jsxs)(l.Z,{value:"createAttachment",children:[(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"allure.createAttachment"})," function provides a more advanced way to define a custom attachment:"]}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"import { allure } from 'jest-allure2-reporter';\n\nconst attachJson = allure.createAttachment('JSON attachment', (data) => {\n  return JSON.stringify(data);\n}, 'application/json');\n\ntest('Sample test', async () => {\n  const myData = {a: 1, b: 2};\n  attachJson(myData);\n});\n"})}),(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"allure.createAttachment"})," function is particularly useful for reusable attachments."]})]}),(0,n.jsxs)(l.Z,{value:"@Attachment",children:[(0,n.jsx)(t.p,{children:"For aspect-oriented programmers, there is a decorator-based approach:"}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"import { Attachment } from 'jest-allure2-reporter';\n\nclass DeviceHelper {\n  @Attachment('device-status-%s.json', 'application/json')\n  getStatus(deviceId) {\n    return { status: 'OK' };\n  }\n}\n"})}),(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"@Attachment"})," decorator is similar to ",(0,n.jsx)(t.code,{children:"allure.createAttachment"})," but works only with class methods."]})]})]}),"\n",(0,n.jsx)(t.p,{children:"Attachments allow you to enrich your test reports with additional context, which can be very useful when diagnosing and debugging failing tests."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.code,{children:"TODO: add screenshot"})})]})}const m=function(e={}){const{wrapper:t}=Object.assign({},(0,r.ah)(),e.components);return t?(0,n.jsx)(t,Object.assign({},e,{children:(0,n.jsx)(h,e)})):h(e)}},425:(e,t,a)=>{a.d(t,{Z:()=>l});a(7294);var n=a(6010);const r={tabItem:"tabItem_Ymn6"};var s=a(5893);function l(e){let{children:t,hidden:a,className:l}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,n.Z)(r.tabItem,l),hidden:a,children:t})}},3992:(e,t,a)=>{a.d(t,{Z:()=>w});var n=a(7294),r=a(6010),s=a(2957),l=a(6550),o=a(1270),c=a(5238),i=a(3609),u=a(2560);function d(e){return n.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:t,children:a}=e;return(0,n.useMemo)((()=>{const e=t??function(e){return d(e).map((e=>{let{props:{value:t,label:a,attributes:n,default:r}}=e;return{value:t,label:a,attributes:n,default:r}}))}(a);return function(e){const t=(0,i.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function m(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function p(e){let{queryString:t=!1,groupId:a}=e;const r=(0,l.k6)(),s=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:t,groupId:a});return[(0,c._X)(s),(0,n.useCallback)((e=>{if(!s)return;const t=new URLSearchParams(r.location.search);t.set(s,e),r.replace({...r.location,search:t.toString()})}),[s,r])]}function f(e){const{defaultValue:t,queryString:a=!1,groupId:r}=e,s=h(e),[l,c]=(0,n.useState)((()=>function(e){let{defaultValue:t,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const n=a.find((e=>e.default))??a[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:s}))),[i,d]=p({queryString:a,groupId:r}),[f,b]=function(e){let{groupId:t}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(t),[r,s]=(0,u.Nk)(a);return[r,(0,n.useCallback)((e=>{a&&s.set(e)}),[a,s])]}({groupId:r}),j=(()=>{const e=i??f;return m({value:e,tabValues:s})?e:null})();(0,o.Z)((()=>{j&&c(j)}),[j]);return{selectedValue:l,selectValue:(0,n.useCallback)((e=>{if(!m({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);c(e),d(e),b(e)}),[d,b,s]),tabValues:s}}var b=a(1048);const j={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=a(5893);function v(e){let{className:t,block:a,selectedValue:n,selectValue:l,tabValues:o}=e;const c=[],{blockElementScrollPositionUntilNextRender:i}=(0,s.o5)(),u=e=>{const t=e.currentTarget,a=c.indexOf(t),r=o[a].value;r!==n&&(i(t),l(r))},d=e=>{let t=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const a=c.indexOf(e.currentTarget)+1;t=c[a]??c[0];break}case"ArrowLeft":{const a=c.indexOf(e.currentTarget)-1;t=c[a]??c[c.length-1];break}}t?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":a},t),children:o.map((e=>{let{value:t,label:a,attributes:s}=e;return(0,x.jsx)("li",{role:"tab",tabIndex:n===t?0:-1,"aria-selected":n===t,ref:e=>c.push(e),onKeyDown:d,onClick:u,...s,className:(0,r.Z)("tabs__item",j.tabItem,s?.className,{"tabs__item--active":n===t}),children:a??t},t)}))})}function g(e){let{lazy:t,children:a,selectedValue:r}=e;const s=(Array.isArray(a)?a:[a]).filter(Boolean);if(t){const e=s.find((e=>e.props.value===r));return e?(0,n.cloneElement)(e,{className:"margin-top--md"}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:s.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==r})))})}function y(e){const t=f(e);return(0,x.jsxs)("div",{className:(0,r.Z)("tabs-container",j.tabList),children:[(0,x.jsx)(v,{...e,...t}),(0,x.jsx)(g,{...e,...t})]})}function w(e){const t=(0,b.Z)();return(0,x.jsx)(y,{...e,children:d(e.children)},String(t))}},1151:(e,t,a)=>{a.d(t,{Zo:()=>o,ah:()=>s});var n=a(7294);const r=n.createContext({});function s(e){const t=n.useContext(r);return n.useMemo((()=>"function"==typeof e?e(t):{...t,...e}),[t,e])}const l={};function o({components:e,children:t,disableParentContext:a}){let o;return o=a?"function"==typeof e?e({}):e||l:s(e),n.createElement(r.Provider,{value:o},t)}}}]);