"use strict";(self.webpackChunk_wix_website_jest_allure2_reporter=self.webpackChunk_wix_website_jest_allure2_reporter||[]).push([[2340],{205:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>a});var t=s(5893),r=s(1151);const i={},l="Customizers",o={id:"api/config/customizers",title:"Customizers",description:"Overview",source:"@site/../docs/api/config/02-customizers.mdx",sourceDirName:"api/config",slug:"/api/config/customizers",permalink:"/jest-allure2-reporter/api/config/customizers",draft:!1,unlisted:!1,editUrl:"https://github.com/wix-incubator/jest-allure2-reporter/tree/beta/docs/../docs/api/config/02-customizers.mdx",tags:[],version:"current",lastUpdatedBy:"Yaroslav Serhieiev",lastUpdatedAt:1725272598e3,sidebarPosition:2,frontMatter:{},sidebar:"apiSidebar",previous:{title:"Presets",permalink:"/jest-allure2-reporter/api/config/presets"},next:{title:"Test Case",permalink:"/jest-allure2-reporter/api/config/test-case"}},c={},a=[{value:"Overview",id:"overview",level:2},{value:"Usage",id:"usage",level:2},{value:"Helpers",id:"helpers",level:2},{value:"Registering Helpers",id:"registering-helpers",level:3},{value:"Using Helpers",id:"using-helpers",level:3},{value:"Context",id:"context",level:2},{value:"Context Structure",id:"context-structure",level:3},{value:"Accessing Context in Customizers",id:"accessing-context-in-customizers",level:3},{value:"Common Customizer Types",id:"common-customizer-types",level:2},{value:"Best Practices",id:"best-practices",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components},{ArticleHeader:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("ArticleHeader",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"customizers",children:"Customizers"})}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(s,{}),"\n",(0,t.jsxs)(n.p,{children:["Test customizers are powerful functions used in the configuration of ",(0,t.jsx)(n.code,{children:"jest-allure2-reporter"})," to modify or enhance various aspects of test reporting. They provide a flexible way to customize how test information is processed and presented in the Allure report."]}),"\n",(0,t.jsx)(n.p,{children:"A test customizer is a function with the following general structure:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"type Customizer<Context, Value> =\n  (context: Context) => Value;\n"})}),"\n",(0,t.jsx)(n.p,{children:"where:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Context"})," is an object containing relevant information about the current test or reporting environment;"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Value"})," is the expected return type, which varies depending on the specific customizer being used."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,t.jsxs)(n.p,{children:["Customizers are typically used in the ",(0,t.jsx)(n.code,{children:"jest-allure2-reporter"})," configuration. For example:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"module.exports = {\n  // ... other Jest config\n  reporters: [\n    'default',\n    ['jest-allure2-reporter', {\n      testCase: {\n        name: ({ testCase }) => `Custom: ${testCase.fullName}`,\n        // Other customizers...\n      }\n    }]\n  ]\n};\n"})}),"\n",(0,t.jsx)(n.h2,{id:"helpers",children:"Helpers"}),"\n",(0,t.jsxs)(n.p,{children:["Helpers are utility functions available within the customizer context as ",(0,t.jsx)(n.code,{children:"$"}),". They provide additional functionality to assist in customizing test reports."]}),"\n",(0,t.jsx)(n.h3,{id:"registering-helpers",children:"Registering Helpers"}),"\n",(0,t.jsxs)(n.p,{children:["Helpers are registered in the ",(0,t.jsx)(n.code,{children:"jest-allure2-reporter"})," configuration using customizers inside ",(0,t.jsx)(n.code,{children:"helpers"})," object:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"module.exports = {\n  // ... other Jest config\n  reporters: [\n    'default',\n    ['jest-allure2-reporter', {\n      helpers: {\n        relativize: (globalContext) => {\n          const rootDir = globalContext.globalConfig.rootDir;\n          // Return a helper function\n          return (filePath) => path.relative(rootDir, filePath.join(path.sep));\n        }\n      }\n    }]\n  ]\n};\n"})}),"\n",(0,t.jsx)(n.h3,{id:"using-helpers",children:"Using Helpers"}),"\n",(0,t.jsxs)(n.p,{children:["Once registered, helpers can be accessed within customizers via the ",(0,t.jsx)(n.code,{children:"$"})," property of the context:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"module.exports = {\n  // ... other Jest config\n  reporters: [\n    'default',\n    ['jest-allure2-reporter', {\n      testCase: {\n        name: ({ $, filePath, value }) => `${value} (${$.relativize(filePath)})`\n      }\n    }]\n  ]\n};\n"})}),"\n",(0,t.jsx)(n.h2,{id:"context",children:"Context"}),"\n",(0,t.jsx)(n.p,{children:"The context is an object passed to customizers, providing relevant information and access to helpers. It's a crucial part of the customizer functionality, allowing access to test-specific data and utility functions."}),"\n",(0,t.jsx)(n.h3,{id:"context-structure",children:"Context Structure"}),"\n",(0,t.jsx)(n.p,{children:"The context object typically includes:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Test-specific information (e.g., ",(0,t.jsx)(n.code,{children:"testCase"}),", ",(0,t.jsx)(n.code,{children:"file"}),", ",(0,t.jsx)(n.code,{children:"result"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Global configuration (",(0,t.jsx)(n.code,{children:"globalConfig"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Helpers (",(0,t.jsx)(n.code,{children:"$"}),")"]}),"\n",(0,t.jsx)(n.li,{children:"Other relevant data depending on the customizer type"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Example context structure:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface CustomizerContext {\n  testCase: TestCaseResult;\n  file: TestFile;\n  result: TestResult;\n  globalConfig: Config.GlobalConfig;\n  $: Helpers;\n  // Other properties...\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"accessing-context-in-customizers",children:"Accessing Context in Customizers"}),"\n",(0,t.jsx)(n.p,{children:"Customizers can destructure the context to access needed properties:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"module.exports = {\n  // ... other Jest config\n  reporters: [\n    'default',\n    ['jest-allure2-reporter', {\n      testCase: {\n        fullName: ({ testCase, filePath, $ }) => {\n          // Use testCase, file, and helpers here\n          return $.customHelper(`${filePath.join('/')}:${testCase.fullName}`);\n        }\n      }\n    }]\n  ]\n};\n"})}),"\n",(0,t.jsx)(n.h2,{id:"common-customizer-types",children:"Common Customizer Types"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Test Case Customizers"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Scope: Individual test cases"}),"\n",(0,t.jsx)(n.li,{children:"Purpose: Modify test case reports with specific details"}),"\n",(0,t.jsx)(n.li,{children:"Use case: Enhancing test case metadata (e.g., name, description, status)"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Test Step Customizers"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Scope: Individual test steps, including hooks"}),"\n",(0,t.jsx)(n.li,{children:"Purpose: Adjust information for each step within a test"}),"\n",(0,t.jsx)(n.li,{children:"Use case: Adding granular details to test execution flow"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Test File Customizers"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Scope: Entire test files (reported as pseudo-test cases)"}),"\n",(0,t.jsx)(n.li,{children:"Purpose: Apply modifications at the file level"}),"\n",(0,t.jsx)(n.li,{children:"Use case: Grouping or categorizing tests by file"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Test Run Customizers"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Scope: Overall test run (reported as a pseudo-test case)"}),"\n",(0,t.jsx)(n.li,{children:"Purpose: Adjust the high-level test run report"}),"\n",(0,t.jsx)(n.li,{children:"Use case: Providing summary information for the entire test suite"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Helper Customizers"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Scope: Global"}),"\n",(0,t.jsx)(n.li,{children:"Purpose: Define custom utility functions"}),"\n",(0,t.jsx)(n.li,{children:"Use case: Creating reusable logic for other customizers"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Global Customizers"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Scope: Global report elements"}),"\n",(0,t.jsx)(n.li,{children:"Purpose: Modify overarching report components"}),"\n",(0,t.jsx)(n.li,{children:"Use case: Adding environment details, categories, or executor information"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Each customizer type has access to a specific context and can modify various properties relevant to its scope. As you become more familiar with the system, you can explore the detailed contexts and properties available for each type."}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Keep customizers pure and side-effect free."}),"\n",(0,t.jsx)(n.li,{children:"Use helpers for complex operations to keep customizers clean."}),"\n",(0,t.jsx)(n.li,{children:"Leverage TypeScript for better type checking and autocompletion."}),"\n",(0,t.jsx)(n.li,{children:"Document custom helpers and complex customizers for team understanding."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"By understanding and effectively using test customizers, helpers, and context, you can create highly tailored and informative Allure reports that meet your specific project needs."})]})}function u(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>o,a:()=>l});var t=s(7294);const r={},i=t.createContext(r);function l(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);