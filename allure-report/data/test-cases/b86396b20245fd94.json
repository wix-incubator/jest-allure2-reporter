{"uid":"b86396b20245fd94","name":"Product reviews widget allows to submit a review","fullName":"Product Catalog Product Reviews Product reviews widget allows to submit a review","historyId":"fcb633384185e09be244809cb5d8c62f","time":{"start":1719579863282,"stop":1719579867305,"duration":4023},"descriptionHtml":"<pre><code class=\"hljs language-typescript\"><span class=\"hljs-comment\">/**\n * <span class=\"hljs-doctag\">@story</span> Submit Review\n * <span class=\"hljs-doctag\">@testClass</span> <span class=\"hljs-variable\">ReviewService</span>\n * <span class=\"hljs-doctag\">@testMethod</span> ReviewService.submitReview()\n */</span>\n<span class=\"hljs-title function_\">test</span>(<span class=\"hljs-string\">'Product reviews widget allows to submit a review'</span>, <span class=\"hljs-keyword\">async</span> () => {\n  <span class=\"hljs-keyword\">await</span> productReviewsDriver.<span class=\"hljs-title function_\">openReviewForm</span>();\n  <span class=\"hljs-keyword\">await</span> productReviewsDriver.<span class=\"hljs-title function_\">fillReviewForm</span>({\n    <span class=\"hljs-attr\">displayName</span>: <span class=\"hljs-string\">'John Doe'</span>,\n    <span class=\"hljs-attr\">email</span>: <span class=\"hljs-string\">'john.doe@example.com'</span>,\n    <span class=\"hljs-attr\">rating</span>: <span class=\"hljs-number\">3</span>,\n    <span class=\"hljs-attr\">title</span>: <span class=\"hljs-string\">'Do something every day that will make you happy'</span>,\n    <span class=\"hljs-attr\">comment</span>: <span class=\"hljs-string\">'Those great big fluffy clouds. '</span> +\n      <span class=\"hljs-string\">'There he comes. '</span> +\n      <span class=\"hljs-string\">'This is a happy place, little squirrels live here and play. '</span> +\n      <span class=\"hljs-string\">'Let your imagination just wonder around when you\\'re doing these things. '</span> +\n      <span class=\"hljs-string\">'There isn\\'t a rule. '</span> +\n      <span class=\"hljs-string\">'You just practice and find out which way works best for you.'</span>,\n  });\n\n  <span class=\"hljs-keyword\">try</span> {\n    <span class=\"hljs-keyword\">await</span> productReviewsDriver.<span class=\"hljs-title function_\">submitReview</span>();\n  } <span class=\"hljs-keyword\">catch</span> {\n    <span class=\"hljs-comment\">// Fail silently to see incorrect screenshot state</span>\n  }\n\n  <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">expect</span>(browser).<span class=\"hljs-title function_\">toMatchImageSnapshot</span>();\n})\n</code></pre>","status":"failed","statusMessage":"Error: Expected screenshots to match, but found 6.2% difference","statusTrace":"at Object.<anonymous> (/Users/yaroslavs/Projects/wix-incubator/jest-allure2-reporter/e2e/demo/product-catalog/product-reviews.test.ts:70:29)","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"descriptionHtml":"<pre><code class=\"hljs language-typescript\"><span class=\"hljs-comment\">/**\n * <span class=\"hljs-doctag\">@story</span> Submit Review\n * <span class=\"hljs-doctag\">@testClass</span> <span class=\"hljs-variable\">ReviewService</span>\n * <span class=\"hljs-doctag\">@testMethod</span> ReviewService.submitReview()\n */</span>\n<span class=\"hljs-title function_\">test</span>(<span class=\"hljs-string\">'Product reviews widget allows to submit a review'</span>, <span class=\"hljs-keyword\">async</span> () => {\n  <span class=\"hljs-keyword\">await</span> productReviewsDriver.<span class=\"hljs-title function_\">openReviewForm</span>();\n  <span class=\"hljs-keyword\">await</span> productReviewsDriver.<span class=\"hljs-title function_\">fillReviewForm</span>({\n    <span class=\"hljs-attr\">displayName</span>: <span class=\"hljs-string\">'John Doe'</span>,\n    <span class=\"hljs-attr\">email</span>: <span class=\"hljs-string\">'john.doe@example.com'</span>,\n    <span class=\"hljs-attr\">rating</span>: <span class=\"hljs-number\">3</span>,\n    <span class=\"hljs-attr\">title</span>: <span class=\"hljs-string\">'Do something every day that will make you happy'</span>,\n    <span class=\"hljs-attr\">comment</span>: <span class=\"hljs-string\">'Those great big fluffy clouds. '</span> +\n      <span class=\"hljs-string\">'There he comes. '</span> +\n      <span class=\"hljs-string\">'This is a happy place, little squirrels live here and play. '</span> +\n      <span class=\"hljs-string\">'Let your imagination just wonder around when you\\'re doing these things. '</span> +\n      <span class=\"hljs-string\">'There isn\\'t a rule. '</span> +\n      <span class=\"hljs-string\">'You just practice and find out which way works best for you.'</span>,\n  });\n\n  <span class=\"hljs-keyword\">try</span> {\n    <span class=\"hljs-keyword\">await</span> productReviewsDriver.<span class=\"hljs-title function_\">submitReview</span>();\n  } <span class=\"hljs-keyword\">catch</span> {\n    <span class=\"hljs-comment\">// Fail silently to see incorrect screenshot state</span>\n  }\n\n  <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">expect</span>(browser).<span class=\"hljs-title function_\">toMatchImageSnapshot</span>();\n})\n</code></pre>","status":"failed","statusMessage":"Error: Expected screenshots to match, but found 6.2% difference","statusTrace":"at Object.<anonymous> (/Users/yaroslavs/Projects/wix-incubator/jest-allure2-reporter/e2e/demo/product-catalog/product-reviews.test.ts:70:29)","steps":[{"name":"Open review form","time":{"start":1719579863283,"stop":1719579864760,"duration":1477},"status":"passed","steps":[],"attachments":[{"uid":"af97dd037ce3ecbb","name":"Screenshot","source":"af97dd037ce3ecbb.png","type":"image/png","size":152149}],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"stepsCount":0,"hasContent":true},{"name":"Fill review form: ★ ★ ★ ","time":{"start":1719579864762,"stop":1719579866738,"duration":1976},"status":"passed","steps":[],"attachments":[{"uid":"eaab38ed0d15357d","name":"Screenshot","source":"eaab38ed0d15357d.png","type":"image/png","size":176167}],"parameters":[{"name":"displayName","value":"'John Doe'"},{"name":"email","value":"'john.doe@example.com'"},{"name":"rating","value":"3"},{"name":"title","value":"'Do something every day that will make you happy'"},{"name":"comment","value":"\"Those great big fluffy clouds. There he comes. This is a happy place, little squirrels live here and play. Let your imagination just wonder around when you're doing these things. There isn't a rule. You just practice and find out which way works best for you.\""}],"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"stepsCount":0,"hasContent":true},{"name":"Submit review","time":{"start":1719579866739,"stop":1719579867282,"duration":543},"status":"broken","statusMessage":"NetworkError: Failed to connect to contact form service.","statusTrace":"at ProductReviewsDriver.submitReview (/Users/yaroslavs/Projects/wix-incubator/jest-allure2-reporter/e2e/demo/drivers/ProductReviewsDriver.ts:49:41)\nat ProductReviewsDriver.hijackFunctionWrapper (/Users/yaroslavs/Projects/wix-incubator/jest-allure2-reporter/src/utils/hijackFunction.ts:26:30)\nat ProductReviewsDriver.submitReview (/Users/yaroslavs/Projects/wix-incubator/jest-allure2-reporter/src/utils/wrapFunction.ts:6:22)\nat ProductReviewsDriver.step (/Users/yaroslavs/Projects/wix-incubator/jest-allure2-reporter/src/runtime/modules/StepsDecorator.ts:54:28)\nat submitReview (/Users/yaroslavs/Projects/wix-incubator/jest-allure2-reporter/src/utils/wrapFunction.ts:6:22)\nat StepsModule.step (/Users/yaroslavs/Projects/wix-incubator/jest-allure2-reporter/src/runtime/modules/StepsModule.ts:30:16)\nat AllureRuntimeImplementation.step (/Users/yaroslavs/Projects/wix-incubator/jest-allure2-reporter/src/runtime/AllureRuntimeImplementation.ts:196:35)\nat ProductReviewsDriver.<anonymous> (/Users/yaroslavs/Projects/wix-incubator/jest-allure2-reporter/src/runtime/modules/StepsDecorator.ts:48:22)\nat ProductReviewsDriver.submitReview (/Users/yaroslavs/Projects/wix-incubator/jest-allure2-reporter/src/utils/wrapFunction.ts:6:22)\nat Object.<anonymous> (/Users/yaroslavs/Projects/wix-incubator/jest-allure2-reporter/e2e/demo/product-catalog/product-reviews.test.ts:65:36)","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":0,"attachmentStep":false,"stepsCount":0,"hasContent":true}],"attachments":[{"uid":"32ba1fdd889c7d91","name":"Screenshot diff","source":"32ba1fdd889c7d91.txt","type":"application/vnd.allure.image.diff","size":517971}],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":3,"attachmentStep":false,"stepsCount":3,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"product-catalog/product-reviews.test.ts"},{"name":"epic","value":"Product Discovery"},{"name":"feature","value":"Read Reviews"},{"name":"story","value":"Submit Review"},{"name":"suite","value":"Product Catalog"},{"name":"subSuite","value":"Product Reviews"},{"name":"package","value":"com.example.shop.reviews"},{"name":"thread","value":"03"},{"name":"testClass","value":"ReviewService"},{"name":"testMethod","value":"ReviewService.submitReview()"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":["failed"],"flaky":false},{"name":"Visual regressions","messageRegex":".*\\bscreenshot.*","matchedStatuses":["failed"],"flaky":false}],"tags":[]},"source":"b86396b20245fd94.json","parameterValues":[]}